/* ================================= 摇杆容器基础样式 ================================= */
/* 摇杆外层容器：固定在左下角，适配触摸区域 */
.joystick {
    position: relative;
    width: 90px;
    height: 90px;
    border: 2px solid rgba(255, 255, 255, 0.6);
    border-radius: 50%;
    background: rgba(10, 14, 23, 0.4);
    backdrop-filter: blur(3px);
    z-index: 10;
    touch-action: none; /* 禁止浏览器默认触摸行为（如滚动） */
    -webkit-touch-callout: none; /* 禁止iOS长按菜单 */
    -webkit-user-select: none; /* 禁止文本选中 */
    user-select: none;
}

/* 摇杆手柄：可拖动的核心部分 */
.joystickHandle {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 35px;
    height: 35px;
    background: #9b59b6;
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(155, 89, 182, 0.8);
    transition: transform 0.05s ease; /* 手柄拖动平滑过渡 */
    touch-action: none;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
}

/* 固定摇杆模式（对应设置中的"固定摇杆"开关） */
.joystick.fixed {
    opacity: 1 !important; /* 固定模式下始终显示，不透明 */
}

/* 非固定摇杆模式：默认半透明，触摸时显示 */
.joystick:not(.fixed) {
    opacity: 0.3; /* 未触摸时半透明，减少界面遮挡 */
    transition: opacity 0.2s ease;
}

/* 非固定摇杆模式：触摸/鼠标按下时显示 */
.joystick:not(.fixed):active,
.joystick:not(.fixed):hover {
    opacity: 1;
}


/* ================================= 右侧功能按钮样式 ================================= */
/* 射击按钮：与摇杆对称，固定在右下角 */
.shootBtn {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: rgba(231, 76, 60, 0.8);
    color: #fff;
    border: 2px solid rgba(255, 255, 255, 0.6);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    touch-action: none;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    transition: all 0.2s ease;
    box-shadow: 0 0 15px rgba(231, 76, 60, 0.5);
}

/* 射击按钮：按下/触摸状态 */
.shootBtn:active {
    background: rgba(203, 67, 53, 1);
    transform: scale(0.95);
    box-shadow: 0 0 10px rgba(231, 76, 60, 0.8);
}

/* 技能按钮：射击按钮右侧，颜色区分功能 */
.skillBtn {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: rgba(52, 152, 219, 0.8);
    color: #fff;
    border: 2px solid rgba(255, 255, 255, 0.6);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    touch-action: none;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    transition: all 0.2s ease;
    box-shadow: 0 0 15px rgba(52, 152, 219, 0.5);
    margin-left: 15px !important; /* 与射击按钮保持间距 */
}

/* 技能按钮：按下/触摸状态 */
.skillBtn:active {
    background: rgba(41, 128, 185, 1);
    transform: scale(0.95);
    box-shadow: 0 0 10px rgba(52, 152, 219, 0.8);
}

/* 技能按钮：冷却中状态（禁用时） */
.skillBtn:disabled {
    background: rgba(108, 117, 125, 0.6);
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: none;
    cursor: not-allowed;
    transform: none;
}


/* ================================= 操作区域布局 ================================= */
/* 左右操作区容器：固定在底部，适配屏幕宽度 */
.controlArea {
    position: absolute;
    bottom: 30px;
    width: 100%;
    display: flex;
    justify-content: space-between;
    padding: 0 30px;
    box-sizing: border-box;
    z-index: 10;
}

/* 右侧按钮容器：确保按钮垂直居中 */
.rightControls {
    display: flex;
    align-items: center;
}


/* ================================= 响应式适配（不同屏幕尺寸） ================================= */
/* 小屏手机（320px以下）：缩小摇杆和按钮尺寸 */
@media (max-width: 320px) {
    .joystick {
        width: 80px;
        height: 80px;
    }
    .joystickHandle {
        width: 30px;
        height: 30px;
    }
    .shootBtn, .skillBtn {
        width: 70px;
        height: 70px;
        font-size: 12px;
    }
    .controlArea {
        padding: 0 20px;
        bottom: 20px;
    }
}

/* 平板/大屏手机（768px以上）：增大摇杆和按钮，适配手指操作 */
@media (min-width: 768px) {
    .joystick {
        width: 110px;
        height: 110px;
    }
    .joystickHandle {
        width: 45px;
        height: 45px;
    }
    .shootBtn, .skillBtn {
        width: 100px;
        height: 100px;
        font-size: 16px;
    }
    .controlArea {
        padding: 0 40px;
        bottom: 40px;
    }
}

/* PC端 hover 效果（大屏设备）：增强桌面端交互 */
@media (min-width: 1024px) {
    .shootBtn:hover:not(:disabled) {
        background: rgba(231, 76, 60, 1);
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(231, 76, 60, 0.7);
    }
    .skillBtn:hover:not(:disabled) {
        background: rgba(52, 152, 219, 1);
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(52, 152, 219, 0.7);
    }
    .joystick:hover:not(.fixed) {
        opacity: 0.6;
    }
}
