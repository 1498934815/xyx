<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>太空射击游戏 - 优化增强版</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="gameContainer">
        <!-- 画布 -->
        <canvas id="gameCanvas"></canvas>
        
        <!-- 游戏信息区 -->
        <div id="gameInfo">
            <span>分数: <span id="score">0</span></span>
            <span>生命: <span id="lives">3</span></span>
            <span>等级: <span id="level">1</span></span>
            <span>升级: <span id="nextLevel">100</span></span>
        </div>
        
        <!-- BOSS相关UI -->
        <div id="bossTimer">BOSS倒计时: <span id="bossTime">90</span>秒</div>
        <div id="bossHealthBar"><div id="bossHealthFill"></div></div>
        <div id="bossName"></div>
        <div id="bossWarning">BOSS来袭!</div>
        
        <!-- 弹窗类UI -->
        <div id="levelUp" class="level-up">等级提升!</div>
        <div id="achievementPopup" class="achievementPopup">
            <div>解锁成就!</div>
            <div id="achievementName">新手飞行员</div>
        </div>
        <div id="skillSelectPopup" class="skillSelectPopup">
            <div style="font-size:20px; margin-bottom:10px; color:#3498db;">选择技能</div>
            <div id="skill1" class="skillOption"><div>穿透子弹</div><div class="skillDesc">子弹可穿透1个敌人，持续10秒，冷却30秒</div></div>
            <div id="skill2" class="skillOption"><div>护盾防御</div><div class="skillDesc">生成护盾吸收3次伤害，持续8秒，冷却45秒</div></div>
            <div id="skill3" class="skillOption"><div>射速爆发</div><div class="skillDesc">射速临时降低50%，持续5秒，冷却60秒</div></div>
        </div>
        <div id="itemPopup" class="itemPopup">获得: 临时射速提升!</div>
        <div id="lifeRegenPopup" class="lifeRegenPopup">生命值 +1</div>
        
        <!-- 状态提示区 -->
        <div id="statusInfo">
            <div id="lifeRegenTimer">生命恢复: <span id="regenTime">60</span>秒</div>
            <div id="attackSpeedInfo">攻击速度: <span id="fireRate">200</span>ms</div>
            <div id="skillCooldown">技能冷却: <span id="cooldownTime">0</span>秒</div>
        </div>
        
        <!-- 操作控制区 -->
        <div id="controls">
            <div id="joystickArea">
                <div id="joystickBase"></div>
                <div id="joystickHandle"></div>
            </div>
            <div style="display:flex; gap:15px;">
                <div id="skillButton" style="width:60px; height:60px; border-radius:50%; background:rgba(155,89,182,0.4); border:2px solid rgba(255,255,255,0.4); display:flex; justify-content:center; align-items:center; color:white; font-size:14px;">技能</div>
                <div id="fireArea"><div id="fireButton">射击</div></div>
            </div>
        </div>
        
        <!-- 页面类UI -->
        <div id="startScreen">
            <h1>太空射击游戏 - 优化增强版</h1>
            <div class="instructions">
                <p class="instruction-item">• 左侧摇杆控制移动，右侧按钮射击</p>
                <p class="instruction-item">• 升级提升射速，每2级可选1个技能</p>
                <p class="instruction-item">• 击败BOSS获得高额奖励，注意躲避技能</p>
            </div>
            <button id="settingsButton" class="secondary">设置</button>
            <button id="startButton">开始游戏</button>
        </div>
        <div id="settingsScreen">
            <h1>游戏设置</h1>
            <div class="setting-option">
                <span>自动射击</span>
                <label class="toggle-switch"><input type="checkbox" id="autoFireToggle"><span class="toggle-slider"></span></label>
            </div>
            <div class="setting-option">
                <span>固定摇杆</span>
                <label class="toggle-switch"><input type="checkbox" id="fixedJoystickToggle"><span class="toggle-slider"></span></label>
            </div>
            <div class="setting-option">
                <span>音效开关</span>
                <label class="toggle-switch"><input type="checkbox" id="soundToggle" checked><span class="toggle-slider"></span></label>
            </div>
            <button id="backToStartButton" class="secondary">返回</button>
        </div>
        <div id="gameOverScreen">
            <h1>游戏结束</h1>
            <p>你的最终得分: <span id="finalScore">0</span></p>
            <p>最高等级: <span id="finalLevel">1</span></p>
            <p>击败BOSS数量: <span id="bossKilled">0</span></p>
            <button id="restartButton">再玩一次</button>
        </div>
    </div>

    <!-- 引入JS文件（按依赖顺序） -->
    <script src="js/core/GameConfig.js"></script>
    <script src="js/core/ObjectPool.js"></script>
    <script src="js/core/Utils.js"></script>
    <script src="js/module/SoundManager.js"></script>
    <script src="js/module/UIManager.js"></script>
    <script src="js/module/Achievement.js"></script>
    <script src="js/module/Player.js"></script>
    <script src="js/module/Enemy.js"></script>
    <script src="js/module/Boss.js"></script>
    <script src="js/GameMain.js"></script>
</body>
</html>
